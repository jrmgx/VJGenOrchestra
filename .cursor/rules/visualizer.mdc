---
description: Create/update/adapt/work on a visualizer
alwaysApply: false
---

To create/update/adapt/work on a new visualizer please follow these instructions:

 - You must render onto the Canvas passed to render(canvas, ctx, analyzer, container, options)
 - Each visualizer renders to its own offscreen canvas; the engine composites all active ones onto the main canvas
 - Prefer transparent backgrounds (clearRect or alpha compositing) so layers blend when multiple visualizers are active
 - Get the audio reactive part from the engine/audio.js (see how ex1 is implemented for reference)
 - For custom canvases (e.g. Three.js), use the container to inject your canvas; the engine will composite it
 - Options: add `options.html` in your visualizer folder. Use `name` or `id` on inputs for keys. Values are passed as `options` (5th param). Example: `<input type="range" name="speed" min="0" max="2" value="1">` → `options.speed`. The engine injects `engine/options.css` for shared styles (transparent bg, sans-serif bold black text, label as block).

# Convert standalone visualizer to engine

When the intent is to convert an existing standalone visualizer use these instructions:

Convert this standalone visualizer in `[DIR]` to work with VJGenOrchestra. Create `visualizers/[id]/index.js` that exports `render(canvas, ctx, analyser, container, options)` and optionally `cleanup(canvas, container)`. Replace their audio setup with the passed `analyser` (use `analyser.getByteFrequencyData()` or `getByteTimeDomainData()`). Replace their `requestAnimationFrame` loop—the engine calls `render` each frame. For custom canvases (e.g. Three.js), inject into `container` instead of `document.body`. Move any UI controls (toggles, sliders, file inputs) to `options.html` with `name`/`id` on inputs; values arrive as `options`. Add the id to `manifest.json`. See `visualizers/ex1`, `damien1`, `damien2` for reference.
