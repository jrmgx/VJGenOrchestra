<!DOCTYPE html>
<html>
<head><meta charset="utf-8"></head>
<body>
  <div>WrapTunnel inspired from <a href="https://niklasknaack.de/">Niklas Knaack</a></div>
  <label>Shape
    <input type="hidden" name="shape" value="circle" id="shape">
    <button type="button" data-value="circle" title="Circle">○</button>
    <button type="button" data-value="square" title="Square">□</button>
  </label>
  <label>Speed <input type="range" name="speed" min="0.25" max="1.5" step="0.05" value="1.5"></label>
  <label><input type="checkbox" name="reactiveSpeed" checked> Reactive speed</label>
  <script>
    (function() {
      var input = document.getElementById('shape');
      var btns = document.querySelectorAll('button[data-value]');
      function syncButtons() {
        btns.forEach(function(btn) {
          btn.style.opacity = btn.dataset.value === input.value ? '1' : '0.5';
        });
      }
      btns.forEach(function(btn) {
        btn.addEventListener('click', function() {
          input.value = btn.dataset.value;
          syncButtons();
          input.dispatchEvent(new Event('change', { bubbles: true }));
        });
      });
      document.addEventListener('optionsApplied', syncButtons);
      syncButtons();
    })();
  </script>
</body>
</html>
